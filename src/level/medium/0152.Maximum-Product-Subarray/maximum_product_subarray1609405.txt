// https://leetcode.com/problems/maximum-product-subarray/solutions/1609405/rust-solution/
impl Solution {
    pub fn max_product(nums: Vec<i32>) -> i32 {
        nums.into_iter()
            .scan([1, 0, 1], |v, x| {
                v[0] *= x;
                v[1] = x;
                v[2] *= x;
                v.sort_unstable();
                Some(v[2])
            })
            .max()
            .unwrap()
    }
}